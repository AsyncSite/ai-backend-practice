# [Session 11 - Level 2] ë‹¨ì¼ ìŠ¤í…Œì´ì§€ Dockerfile (ë¹„êµìš©)
#
# ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œì™€ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ë¹„êµí•˜ì„¸ìš”.

FROM gradle:7.6-jdk17 AS single-stage

WORKDIR /app

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

# ë¹Œë“œ
RUN gradle clean build -x test

# ì‹¤í–‰ (ë¹Œë“œ ë„êµ¬ê°€ í¬í•¨ëœ ë¬´ê±°ìš´ ì´ë¯¸ì§€)
EXPOSE 8080

ENTRYPOINT ["java", "-jar", "build/libs/backend-study-0.0.1-SNAPSHOT.jar"]

# ============================================
# ğŸ’¡ ë¬¸ì œì 
# ============================================
# 1. ì´ë¯¸ì§€ í¬ê¸°ê°€ í¼ (Gradle + JDK í¬í•¨)
# 2. ì†ŒìŠ¤ ì½”ë“œê°€ ì´ë¯¸ì§€ì— í¬í•¨ë¨ (ë³´ì•ˆ ìœ„í—˜)
# 3. ë¶ˆí•„ìš”í•œ ë¹Œë“œ ë„êµ¬ê°€ ëŸ°íƒ€ì„ì— í¬í•¨ë¨
#
# ============================================
# ğŸ’¡ ë¹„êµ í…ŒìŠ¤íŠ¸
# ============================================
# docker build -f Dockerfile.single -t backend-single:latest .
# docker images | grep backend
#
# ë©€í‹°ìŠ¤í…Œì´ì§€: ~300MB
# ë‹¨ì¼ìŠ¤í…Œì´ì§€: ~800MB
